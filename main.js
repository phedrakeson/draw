(()=>{"use strict";new class{constructor(t){this.canvas=document.getElementById(t),this.context=this.canvas.getContext("2d"),this.pressed=!1,this.x=void 0,this.y=void 0,this.ongoingTouches=new Array,this.handleStart=this.handleStart.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleMove=this.handleMove.bind(this),this.handleCancel=this.handleCancel.bind(this),this.ongoingTouchIndexById=this.ongoingTouchIndexById.bind(this),this.copyTouch=this.copyTouch.bind(this),this.adjustLine=this.adjustLine.bind(this),this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight}mouseRecognitions(){this.canvas.addEventListener("mousedown",(t=>{this.pressed=!0,this.x=t.offsetX,this.y=t.offsetY})),this.canvas.addEventListener("mouseup",(()=>{this.pressed=!1,this.x=void 0,this.y=void 0})),this.canvas.addEventListener("mousemove",(t=>{if(this.pressed){const e=t.offsetX,i=t.offsetY;this.drawCircle(e,i),this.drawLine(this.x,this.y,e,i),this.x=e,this.y=i}}))}touchRecognitions(){this.canvas.addEventListener("touchstart",this.handleStart,!1),this.canvas.addEventListener("touchend",this.handleEnd,!1),this.canvas.addEventListener("touchmove",this.handleMove,!1),this.canvas.addEventListener("touchcancel",this.handleCancel,!1),this.canvas.addEventListener("touchleave",this.handleEnd,!1)}handleStart(t){const e=t.changedTouches;t.preventDefault();for(let t=0;t<e.length;t++)this.ongoingTouches.push(this.copyTouch(e[t]))}handleMove(t){t.preventDefault();const e=t.changedTouches;for(let t=0;t<e.length;t++){const i=this.ongoingTouchIndexById(e[t].identifier);this.x=this.ongoingTouches[i].clientX,this.y=this.ongoingTouches[i].clientY;const n=e[t].clientX,s=e[t].clientY;i>=0?(this.drawLine(n,s),this.drawLine(this.x,this.y,n,s),this.ongoingTouches.splice(i,1,this.copyTouch(e[t]))):console.error("Can't figure out which touch to continue.")}}handleEnd(t){t.preventDefault();const e=t.changedTouches;for(let t=0;t<e.length;t++){const i=this.ongoingTouchIndexById(e[t].identifier);i>=0?(this.context.beginPath(),this.ongoingTouches.splice(i,1)):console.error("Can't figure out which touch to end.")}}handleCancel(t){t.preventDefault();const e=t.changedTouches;for(let t=0;t<e.length;t++)this.ongoingTouches.splice(t,1)}copyTouch(t){return{identifier:t.identifier,clientX:t.clientX,clientY:t.clientY}}ongoingTouchIndexById(t){for(var e=0;e<this.ongoingTouches.length;e++)if(this.ongoingTouches[e].identifier==t)return e;return-1}setup(){this.configSetup(),this.mouseRecognitions(),this.touchRecognitions()}configSetup(){this.adjustLine(),this.adjustColor(),this.clearBoard()}adjustLine(){this.decreaseBtn=document.getElementById("decrease"),this.increaseBtn=document.getElementById("increase"),this.lineWidthElement=document.getElementById("widthValue"),this.value=2,this.lineWidthElement.innerText=this.value,this.decreaseBtn.addEventListener("click",(()=>{this.value-=2,this.value<=0&&(this.value=2),this.lineWidthElement.innerText=this.value,this.updateWidthValueOnScreen(this.value)})),this.increaseBtn.addEventListener("click",(()=>{this.value+=2,this.value>=20&&(this.value=20),this.innerText=this.value,this.updateWidthValueOnScreen(this.value)}))}adjustColor(){this.color=document.getElementById("color"),this.color.addEventListener("change",(t=>{this.color=t.target.value}))}updateWidthValueOnScreen(t){this.lineWidthElement.innerText=t}drawLine(t,e,i,n){this.context.lineWidth=2*this.lineWidthElement.innerText,this.context.beginPath(),this.context.moveTo(t,e),this.context.lineTo(i,n),this.context.strokeStyle=this.color,this.context.stroke()}drawCircle(t,e){this.context.beginPath(),this.context.arc(t,e,this.lineWidthElement.innerText,0,2*Math.PI),this.context.fillStyle=this.color,this.context.fill()}clearBoard(){document.getElementById("trash").addEventListener("click",(()=>{this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}))}}("sketch").setup()})();